!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=10)}([function(e,t){e.exports=require("express")},function(e,t){e.exports=require("mongoose")},function(e){e.exports=JSON.parse('{"a":"-----BEGIN RSA PRIVATE KEY-----\\nMIIEogIBAAKCAQEAtvRP/Fdud0i4k73E552Jn0JjQ6BDT/hZMHSXRQWBi/CJAkp3uC8YvfLdclNRbm0yZWet/0Gx8bb51G21YjZVR77Ra1BcupBcL2/yUmLzsnKww6jutOuFcaJOsbj7ZfjH8dqDkSvgpF0A+j2tpRoxptyMxR7+Uzb3p2VR/bYG3Es5IUfO91ymslcB6PaUS5b1SR5AWj3SLwwrTGK73grGsveEBWgrLwIUYDNWtvmCnR6ANZWpAAOO8F4v8hvzKSjWaGkQIBOTDawLpmRjoCS70SU8uKsPtA5nRSzH4/gVFJQeot0qrMyNXRT2k01OBOkia3XlihRnvcf558vQjt05FwIDAQABAoIBAClz55+UK8pJJtEKwU99SU5VW2paKIY5DfRFpnSUD8smP9TODJwlx6RaH8SkjiHIChAh0rGwL+JFhAuWo+9RwjbUTFzVQ31d8hUpdy0lkHPROq3KW/OQHZcmoE/ySrvLB3qL+R1uZKK5E9yfFvX+nlthQ1/yastt++TotxAWKy3EVxqBCeuN5rik5z9y+/BC/gdbHUYk5VDcSnjyRbGzMSqcun4VVmBcjFjJqVZYIg5RS48o6lz9U08ko9U+3fwzzhDUJbn3gT3uHrF5009Bz6byogw0TC8H4TOiZkrDMmtLLx58BAOcTEXgfTL7HcSoBvGLmgHbo145YwU3RAQyKbkCgYEA6eg4Wiw9lVgZimrDlH3H1VH4dNGamDOY5BkCXbMII4LCn68K5BlXpKYmQhY6iTsb3jrN5SALJ0M3+us9P3R4ZpZC5h/KcDkgZbvJOcjdALTJ9tq6wTqtTXmfdKkFGUG0k35YGhVfQGAx6pYz4NQfRr00vLOT1DWx0Axn6d4aQ4MCgYEAyDwTMKZeSGzzxEZaqYwBHdJWWZJKCPAhWMyCKjTbPvCXjk/ZuhUDDmH4flyw1IzLYUTsHaEMhOheyjnEqk8G+mMIPiK+sYmLWCKyY8RDHLHOnCyd+lGoIF89FyUzaEGYw+uf7wgADS3EW6FgPIZ+P9qNcB5Hhka3ROWBXFRre90CgYAWj2hIAjZaXinweMWuX8dTYtmU4taHUYqwjVz2Dpt9WVJONoLVZ0BVyBSukRhKPiI89+z96W5J9ijDEcdRhHlMY7fGHFDZLBlc1pTc9uuh8s37+jLDClbGvzFK/jZYrkatZyU2NtN+EQkfeCc+yxbNKtiYTrW2ZQtmZpvrKZnc4wKBgEjR4EC/IGbCiNyGoY4rhnRr/E9S7m3VtqrupR/oXRvEr7lnvMz5u0TNyGtcFksWcRiM0jnsSftD7sUowScW2njQ7zx5slQqq2yAIdQ6mhWjbHpLl6Bjdftf5321X764rHAEDwQFKs+gJ1sTk0Yvu1ZJi0qNGIHy0c/Sj3sekIBZAoGAWg+QEeX0sY06euTW/emb0JWAra4LWicr6MiEr/3/v5GOiLoUAllz4bxTnbKdhQLDh0UpRWL67SIz6FUSz66XyA5MNNKlZSlXD76Q7LWp5Db/sTQAlIxk/8vB/2Kfi5KOXA5I3v0NH/7B+ckoYCjdsMPHQC8UUIDRiUsR0DUnMXU=\\n-----END RSA PRIVATE KEY-----","b":"-----BEGIN PUBLIC KEY-----\\nMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAtvRP/Fdud0i4k73E552Jn0JjQ6BDT/hZMHSXRQWBi/CJAkp3uC8YvfLdclNRbm0yZWet/0Gx8bb51G21YjZVR77Ra1BcupBcL2/yUmLzsnKww6jutOuFcaJOsbj7ZfjH8dqDkSvgpF0A+j2tpRoxptyMxR7+Uzb3p2VR/bYG3Es5IUfO91ymslcB6PaUS5b1SR5AWj3SLwwrTGK73grGsveEBWgrLwIUYDNWtvmCnR6ANZWpAAOO8F4v8hvzKSjWaGkQIBOTDawLpmRjoCS70SU8uKsPtA5nRSzH4/gVFJQeot0qrMyNXRT2k01OBOkia3XlihRnvcf558vQjt05FwIDAQAB\\n-----END PUBLIC KEY-----","d":"IqS1y4RkP4zoJCNPgrGh8/gACxeR7xaS9LhgOGxC","c":"AKIAZ24IWPCGFK55COG4"}')},function(e,t){e.exports=require("jsonwebtoken")},function(e,t){e.exports=require("bcryptjs")},function(e,t){e.exports=require("cors")},function(e,t){e.exports=require("validator")},function(e,t){e.exports=require("aws-sdk")},function(e,t){e.exports=require("http")},function(e,t){e.exports=require("body-parser")},function(e,t,r){"use strict";r.r(t);var n=r(0),o=r.n(n),i=r(1),u=r.n(i),a=r(5),s=r.n(a);var c={"0000":"Success","0011":"User already exists","0404":"Item not found","invalid-creds":"Invalid Email Address or Password","no-auth":"Please provide authorization token","invalid-jwt":"JWT token is not valid","user-not-found":"User Not Found",forbidden:"Access Forbidden"},l=function(){function e(e){this.data=void 0,this.error=void 0,this.resultCode=e.resultCode,this.message=e.message,this.data=e.data,this.error=e.error}return e.get=function(t,r,n,o){return void 0===r&&(r=""),void 0===n&&(n=void 0),void 0===o&&(o=void 0),0==r.length?new e({resultCode:t,message:c[t],data:n,error:o}):new e({resultCode:t,message:r,data:n,error:o})},e.prototype.SetData=function(e){return this.data=e,this},e.prototype.SetMessage=function(e){return this.message=e,this},e.prototype.SetResultCode=function(e){return this.resultCode=e,this},e.prototype.SetError=function(e){return this.error=e,this},e.prototype.parseAs=function(){return this.data?this.data:void 0},e}(),f=function(){function e(e,t,r){void 0===t&&(t=400),this.responseCode=400,this.message=r,this.resultCode=e,this.responseCode=t,this.name="ApiError"}return e.prototype.toResponseData=function(){return l.get(this.resultCode,c[this.resultCode],void 0,this.message)},e}(),d=r(9),p=[d.json(),d.urlencoded({extended:!0})];function h(e){return function(t,r,n){for(var o=0,i=e;o<i.length;o++){var u=i[o];delete t.body[u]}n()}}var y=r(3),v=r.n(y),b=r(2),w=function(){function e(){}return e.sign=function(e,t){return t.algorithm="RS256",v.a.sign(e,b.a,t)},e.decode=function(e,t){return v.a.decode(e,t)},e.verify=function(e,t){return t.algorithms=["RS256"],v.a.verify(e,b.b,t)},e}(),g=r(4),S=r.n(g),m=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function u(e){try{s(n.next(e))}catch(e){i(e)}}function a(e){try{s(n.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(u,a)}s((n=n.apply(e,t||[])).next())}))},x=function(e,t){var r,n,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;u;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,n=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=t.call(e,u)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},j=new i.Schema({firstName:{type:String},lastName:{type:String},phoneNumber:{type:String,unique:!0,sparse:!0},gender:{type:String,enum:["Male","Female","Other"]},email:{type:String,required:[!0,"email is required"],unique:!0,sparse:!0},passwordHash:{type:String,required:[!0,"Password is required"]},passwordSalt:{type:String},address:{type:{line1:{type:String,required:[!0,"Address Line1 is required"]},line2:{type:String},postalCode:{type:String,required:[!0,"Postal is required"]},city:{type:String,required:[!0,"City is required"]},state:{type:String,required:[!0,"State is required"]},country:{type:String,required:[!0,"Country is required"]},point:{type:{title:{type:String,required:!0},coordinates:{type:[Number],required:!0}}}}},photoUrl:{type:String}},{toJSON:{transform:function(e,t,r){return delete t.passwordHash,delete t.passwordSalt,t}}});j.pre("save",(function(e){var t=this;if(!t.isModified("passwordHash"))return e();S.a.genSalt(10,(function(r,n){if(r)return console.log(r),e(r);S.a.hash(t.passwordHash,n,(function(r,o){if(r)return e(r);t.passwordHash=o,t.passwordSalt=n,e()}))}))})),j.method("jwt",(function(){return w.sign({_couchdb:{roles:["user"]}},{subject:String(this._id),keyid:"accelerate",expiresIn:"7d",issuer:"accelerate.fitness"})})),j.static("authenticate",(function(e,t){return m(this,void 0,void 0,(function(){var r;return x(this,(function(n){switch(n.label){case 0:return[4,q.findOne({email:e}).exec()];case 1:if(r=n.sent()){if(S.a.compareSync(t,r.passwordHash))return[2,r.jwt()];throw new f("",401,c["invalid-creds"])}throw new f("user-not-found",404,c["user-not-found"])}}))}))}));var q=Object(i.model)("user",j),A=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function u(e){try{s(n.next(e))}catch(e){i(e)}}function a(e){try{s(n.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(u,a)}s((n=n.apply(e,t||[])).next())}))},k=function(e,t){var r,n,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;u;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,n=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=t.call(e,u)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};function R(e){var t=this;return function(r,n,o){A(t,void 0,void 0,(function(){return k(this,(function(t){switch(t.label){case 0:return[4,e(r,n,o)];case 1:return t.sent(),[2]}}))})).catch(o)}}var C=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function u(e){try{s(n.next(e))}catch(e){i(e)}}function a(e){try{s(n.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(u,a)}s((n=n.apply(e,t||[])).next())}))},O=function(e,t){var r,n,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;u;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,n=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=t.call(e,u)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};function U(){var e=this;return R((function(t,r,n){return C(e,void 0,void 0,(function(){var e,r,o,i;return O(this,(function(u){switch(u.label){case 0:return(e=null===(i=t.headers.authorization)||void 0===i?void 0:i.replace("Bearer ","").trim())?(r=w.verify(e,{}),[4,q.findById(r.sub).exec()]):[3,2];case 1:if(!(o=u.sent()))throw new f("user-not-found",404,c["user-not-found"]);return t.user=o,n(),[3,3];case 2:throw new f("invalid-jwt",401,c["invalid-jwt"]);case 3:return[2]}}))}))}))}var B=new i.Schema({name:{type:String,required:[!0,"Name is required"]},phoneNumber:{type:String,required:[!0,"Phone number is required"],unique:!0},gender:{type:String,enum:["Male","Female","Other"]},email:{type:String,required:[!0,"email is required"],unique:!0},passwordHash:{type:String,required:[!0,"Password is required"]},passwordSalt:{type:String,required:!0},address:{type:{line1:{type:String,required:[!0,"Address Line1 is required"]},line2:{type:String,required:!1},postalCode:{type:String,required:[!0,"Postal Code is required"]},point:{type:{type:String,required:!0},coordinates:{type:[Number],required:!0}}},required:[!0,"Address is required."]},photoUrl:{type:String,required:[!0,"Profile picture is required for identification"]},verified:{type:Boolean,required:!0},documents:[{title:{type:String,required:!0},proof:{type:String,required:!0}}]},{toJSON:{transform:function(e,t,r){return delete t.passwordHash,delete t.passwordSalt,t}}}),E=Object(i.model)("fitnessPartner",B),I=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function u(e){try{s(n.next(e))}catch(e){i(e)}}function a(e){try{s(n.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(u,a)}s((n=n.apply(e,t||[])).next())}))},D=function(e,t){var r,n,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;u;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,n=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=t.call(e,u)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},K=Object(n.Router)();K.post("/",h(["_id"]),R((function(e,t){return I(void 0,void 0,void 0,(function(){var r;return D(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,E.create(e.body)];case 1:return n.sent(),[3,3];case 2:throw"MongoError"===(r=n.sent()).name&&11e3===r.code?new f("0011",400,"User already exists"):r;case 3:return t.send(l.get("0000")),[2]}}))}))})));var P=r(6),T=r.n(P),G=r(7),N=r.n(G);var W=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function u(e){try{s(n.next(e))}catch(e){i(e)}}function a(e){try{s(n.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(u,a)}s((n=n.apply(e,t||[])).next())}))},H=function(e,t){var r,n,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;u;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,n=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=t.call(e,u)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},L=Object(n.Router)();L.put("/",h(["_id"]),R((function(e,t){return W(void 0,void 0,void 0,(function(){var r,n;return H(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,q.create(e.body)];case 1:return r=o.sent(),t.send(l.get("0000").SetData({jwt:r.jwt()})),[3,3];case 2:throw n=o.sent(),console.log(n),"MongoError"===n.name&&11e3===n.code?new f("0011",400,"User already exists"):n;case 3:return[2]}}))}))}))),L.use(U()),L.get("/",R((function(e,t){return W(void 0,void 0,void 0,(function(){return H(this,(function(r){return t.send(l.get("0000").SetData(e.user.toJSON())),[2]}))}))}))),L.post("/",h(["_id","passwordHash","passwordSalt"]),R((function(e,t){return W(void 0,void 0,void 0,(function(){var r,n,o,i,u;return H(this,(function(a){switch(a.label){case 0:if(r=e.body,n=e.user,!r.photoUrl)return[3,4];if(!T.a.isBase64(r.photoUrl))return[3,4];o=String(r.photoUrl).match(/[^:/]\w+(?=;|,)/),i=o?o[0]:"",u="profile-images/"+n._id+(i?"."+i:""),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,new N.a.S3({apiVersion:"2006-03-01",credentials:{accessKeyId:b.c,secretAccessKey:b.d}}).putObject({Bucket:"accelerate-images",Key:u,Body:r.photoUrl})];case 2:return a.sent(),r.photoUrl="https://accelerate-images.s3.amazonaws.com/"+u,[3,4];case 3:throw a.sent(),new f("image-upload-failed",500,"Failed to upload image please try again later.");case 4:return[4,e.user.updateOne(r)];case 5:return a.sent(),t.send(l.get("0000").SetData(e.user.toJSON())),[2]}}))}))})));var Y=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function u(e){try{s(n.next(e))}catch(e){i(e)}}function a(e){try{s(n.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(u,a)}s((n=n.apply(e,t||[])).next())}))},M=function(e,t){var r,n,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;u;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,n=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=t.call(e,u)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},Q=Object(n.Router)();Q.use("/user",L),Q.use("/partners",K),Q.post("/",R((function(e,t){return Y(void 0,void 0,void 0,(function(){var r,n,o,i;return M(this,(function(u){switch(u.label){case 0:return r=e.body,n=r.email,o=r.password,[4,q.authenticate(n,o)];case 1:return i=u.sent(),t.send(l.get("0000").SetData({jwt:i})),[2]}}))}))}))),Q.post("/forgot-password",R((function(e,t){return Y(void 0,void 0,void 0,(function(){return M(this,(function(e){return[2]}))}))}))),Q.use(U()),Q.get("/refresh-token",R((function(e,t){return Y(void 0,void 0,void 0,(function(){return M(this,(function(r){return t.send(l.get("0000").SetData({jwt:e.user.jwt()})),[2]}))}))})));var F=Object(n.Router)();F.use("/auth",Q);var Z=r(8),J=r.n(Z),z=o()();u.a.connect("mongodb+srv://admin:U6PXNTcCMvuWJQUH@cluster0.jkbm8.mongodb.net/accelerate?retryWrites=true&w=majority",{useNewUrlParser:!0,useUnifiedTopology:!0,useCreateIndex:!0}),z.use(s()()),z.use(p),z.use(F),z.use((function(e,t,r,n){e.constructor===f&&"ApiError"===e.name?r.status(e.responseCode).send(e.toResponseData()):(r.status(500).send(l.get("unknown","",void 0,e.message)),console.log(e))})),J.a.createServer(z).listen(process.env.PORT||8080,(function(){console.log("Server Running...")}))}]);