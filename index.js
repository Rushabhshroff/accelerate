!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=26)}([function(e,t){e.exports=require("express")},function(e,t){e.exports=require("mongoose")},function(e){e.exports=JSON.parse('{"b":"-----BEGIN RSA PRIVATE KEY-----\\nMIIEogIBAAKCAQEAtvRP/Fdud0i4k73E552Jn0JjQ6BDT/hZMHSXRQWBi/CJAkp3uC8YvfLdclNRbm0yZWet/0Gx8bb51G21YjZVR77Ra1BcupBcL2/yUmLzsnKww6jutOuFcaJOsbj7ZfjH8dqDkSvgpF0A+j2tpRoxptyMxR7+Uzb3p2VR/bYG3Es5IUfO91ymslcB6PaUS5b1SR5AWj3SLwwrTGK73grGsveEBWgrLwIUYDNWtvmCnR6ANZWpAAOO8F4v8hvzKSjWaGkQIBOTDawLpmRjoCS70SU8uKsPtA5nRSzH4/gVFJQeot0qrMyNXRT2k01OBOkia3XlihRnvcf558vQjt05FwIDAQABAoIBAClz55+UK8pJJtEKwU99SU5VW2paKIY5DfRFpnSUD8smP9TODJwlx6RaH8SkjiHIChAh0rGwL+JFhAuWo+9RwjbUTFzVQ31d8hUpdy0lkHPROq3KW/OQHZcmoE/ySrvLB3qL+R1uZKK5E9yfFvX+nlthQ1/yastt++TotxAWKy3EVxqBCeuN5rik5z9y+/BC/gdbHUYk5VDcSnjyRbGzMSqcun4VVmBcjFjJqVZYIg5RS48o6lz9U08ko9U+3fwzzhDUJbn3gT3uHrF5009Bz6byogw0TC8H4TOiZkrDMmtLLx58BAOcTEXgfTL7HcSoBvGLmgHbo145YwU3RAQyKbkCgYEA6eg4Wiw9lVgZimrDlH3H1VH4dNGamDOY5BkCXbMII4LCn68K5BlXpKYmQhY6iTsb3jrN5SALJ0M3+us9P3R4ZpZC5h/KcDkgZbvJOcjdALTJ9tq6wTqtTXmfdKkFGUG0k35YGhVfQGAx6pYz4NQfRr00vLOT1DWx0Axn6d4aQ4MCgYEAyDwTMKZeSGzzxEZaqYwBHdJWWZJKCPAhWMyCKjTbPvCXjk/ZuhUDDmH4flyw1IzLYUTsHaEMhOheyjnEqk8G+mMIPiK+sYmLWCKyY8RDHLHOnCyd+lGoIF89FyUzaEGYw+uf7wgADS3EW6FgPIZ+P9qNcB5Hhka3ROWBXFRre90CgYAWj2hIAjZaXinweMWuX8dTYtmU4taHUYqwjVz2Dpt9WVJONoLVZ0BVyBSukRhKPiI89+z96W5J9ijDEcdRhHlMY7fGHFDZLBlc1pTc9uuh8s37+jLDClbGvzFK/jZYrkatZyU2NtN+EQkfeCc+yxbNKtiYTrW2ZQtmZpvrKZnc4wKBgEjR4EC/IGbCiNyGoY4rhnRr/E9S7m3VtqrupR/oXRvEr7lnvMz5u0TNyGtcFksWcRiM0jnsSftD7sUowScW2njQ7zx5slQqq2yAIdQ6mhWjbHpLl6Bjdftf5321X764rHAEDwQFKs+gJ1sTk0Yvu1ZJi0qNGIHy0c/Sj3sekIBZAoGAWg+QEeX0sY06euTW/emb0JWAra4LWicr6MiEr/3/v5GOiLoUAllz4bxTnbKdhQLDh0UpRWL67SIz6FUSz66XyA5MNNKlZSlXD76Q7LWp5Db/sTQAlIxk/8vB/2Kfi5KOXA5I3v0NH/7B+ckoYCjdsMPHQC8UUIDRiUsR0DUnMXU=\\n-----END RSA PRIVATE KEY-----","c":"-----BEGIN PUBLIC KEY-----\\nMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAtvRP/Fdud0i4k73E552Jn0JjQ6BDT/hZMHSXRQWBi/CJAkp3uC8YvfLdclNRbm0yZWet/0Gx8bb51G21YjZVR77Ra1BcupBcL2/yUmLzsnKww6jutOuFcaJOsbj7ZfjH8dqDkSvgpF0A+j2tpRoxptyMxR7+Uzb3p2VR/bYG3Es5IUfO91ymslcB6PaUS5b1SR5AWj3SLwwrTGK73grGsveEBWgrLwIUYDNWtvmCnR6ANZWpAAOO8F4v8hvzKSjWaGkQIBOTDawLpmRjoCS70SU8uKsPtA5nRSzH4/gVFJQeot0qrMyNXRT2k01OBOkia3XlihRnvcf558vQjt05FwIDAQAB\\n-----END PUBLIC KEY-----","e":"IqS1y4RkP4zoJCNPgrGh8/gACxeR7xaS9LhgOGxC","d":"AKIAZ24IWPCGFK55COG4","a":{"type":"service_account","project_id":"api-5537968803267499690-853524","private_key_id":"c11ef6a9309c3cad3f3a450c727a3a3a43842fa1","private_key":"-----BEGIN PRIVATE KEY-----\\nMIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQDQG3b7Blw61BYV\\nCMMWGI7v99EqtJVCIxXygoTvikDs3i1RHtpO1TXKCwMkD2qOYApu283StsZ4Rfi0\\nYcwgZhaWZHz0g1DnWoi9TsBZmwGcOFwDcooEaCxN6b00gakRUqWPzJZM8xZG7/Md\\n1kEBvgfK9tSqW0usVjHTfg4150/Rr5pUacRRj9F1vU6mnXZmYLFEv5NmNMbkbtF6\\nQSenqd+oBZY8pFrdbRYHWrnMzyOPg1y5LxmTDeeOh/IJTBT2idQV67sCeUlozn1Y\\nB9vvxw2f3PzyCeAu11NRnkR5xAt8P39Oz53+PfIxAb8bKWNCodyxUCdI76vgbO2r\\nRUTU46hrAgMBAAECggEABJCNqAzoKfwr7dMu4EWyoO3ZHywt1/EIErUtMEniia+H\\n4+8ez7rafq+GJpzV9ACEShE1LwmGSe4S+fXpMc67cRoMKZrVw/VW6XwYOP7u5pvP\\n3N1+zIDyc9UMKuIrMK+U5RYSN+bfFrg9p2pjK6Qc7KVEXeY5vzJ2zlJGAoWr2QgM\\nWNN1BZX9rDo9yLaaxrbIw7I3MXYA47GRX07jaIAXdBRMbcA1yIgRD84DYWZ+EQun\\n6jfqJ3PUtdMrDGDabmU5clw6SGXsnxpRrfrY7yIICpxEuLOCv3Po8OmhXDg0kLVk\\nxCunOlfVwWKUekDXVfTBIN02fKU0gORbkGAK0+comQKBgQD+L0tt57qaPjACzmj1\\nxcDDyTtRxmQH8wbHhSbvYmGoLJL83lousguoWoABySD4tY3HQpD4vX4RVjpefD4z\\nS1GnECyMLSidsKMEEVjHDA/JrqyeXu/yf0+bo7c5lPfYiNYiTcFoVitRjzrL9HRx\\ndNAqwHNPKiRMPaePJLPgDqBa0wKBgQDRl+4xL4HTLqmy9wix5pokyC/GFuup5MUT\\n3QOnPRcSrURiVKX4ZGUm0ctIA1jH1Ar2GRA3NTJ9gUBU2ymybnbNMlOXywnJ5num\\n0CmIHYLgdI/anhnwAd4FACp9KctvmtIVOUGbE+Sp2nAoKWkQSv+JlUPk4PbM3/f0\\nKpEt7vVNCQKBgQDkNuBZYBn5DGaczmgMai2lW1JIHICJZpiqoJERktotXT/ni1ea\\n3z56PC7763IP+ym9QrXYroG23R1w4coS0cgQ4AOvI4h49DOYnl5/8ANox8yyMHjs\\n14NJMRd7upVAM7NWf0tr+xnPk3Jt1iCKESApkjq1VBfc3+pGKeTaASfWAwKBgQCu\\n3YlW9AHmxanDrKNOeczlHzfslzbrOfjLB7yCjU9wv6qsN195i5lw99wYKuKpZdn3\\nVRXYWcPUPkAEDA4P1mW78V8Y58c08dz8YfQkoiqNRfK3POz69zPbDDZm0rXuWUcp\\neemojsJai+rDNzl25HuquCQ7Ew4WBE6FIfaaUiHKsQKBgCgUfK7kUIA/9fzu7pno\\nYmryV3lfp0eqead33Y75vRWr+AL3TxB3eGukUdf1IKcE4CsOo89fWp+plzo3PrAC\\nXWxgS2QxodzvFaKdCvHb4qAXkojuvSQprQ9jn934xWU+mKUtvrxMXKHIgclk3mW4\\nStvp+jNawFYmdm0O9jt2WDog\\n-----END PRIVATE KEY-----\\n","client_email":"google-play-android-developer@api-5537968803267499690-853524.iam.gserviceaccount.com","client_id":"107022776947566050774","auth_uri":"https://accounts.google.com/o/oauth2/auth","token_uri":"https://oauth2.googleapis.com/token","auth_provider_x509_cert_url":"https://www.googleapis.com/oauth2/v1/certs","client_x509_cert_url":"https://www.googleapis.com/robot/v1/metadata/x509/google-play-android-developer%40api-5537968803267499690-853524.iam.gserviceaccount.com"}}')},function(e,t,n){"use strict";t.request=n(14),t.post=n(17),t.get=n(19)},function(e,t){e.exports=require("assert")},function(e,t){e.exports=require("jsonwebtoken")},function(e,t){e.exports=require("bcryptjs")},function(e,t,n){"use strict";const r=n(24);t.tokenRequest="https://accounts.google.com/o/oauth2/token",t.publisherScope="https://www.googleapis.com/auth/androidpublisher",t.purchasesProductsGet=function(e,t,n,o){return r.format("https://www.googleapis.com/androidpublisher/v3/applications/%s/purchases/products/%s/tokens/%s?access_token=%s",encodeURIComponent(e),encodeURIComponent(t),encodeURIComponent(n),encodeURIComponent(o))},t.purchasesSubscriptionsGet=function(e,t,n,o){return r.format("https://www.googleapis.com/androidpublisher/v3/applications/%s/purchases/subscriptions/%s/tokens/%s?access_token=%s",encodeURIComponent(e),encodeURIComponent(t),encodeURIComponent(n),encodeURIComponent(o))},t.purchasesSubscriptionsCancel=function(e,t,n,o){return r.format("https://www.googleapis.com/androidpublisher/v3/applications/%s/purchases/subscriptions/%s/tokens/%s:cancel?access_token=%s",encodeURIComponent(e),encodeURIComponent(t),encodeURIComponent(n),encodeURIComponent(o))}},function(e,t){e.exports=require("cors")},function(e,t){e.exports=require("validator")},function(e,t){e.exports=require("aws-sdk")},function(e,t,n){"use strict";const r={amazon:n(13),apple:n(20),google:n(21),roku:n(25)};t.verifyPayment=function(e,t,n){function o(e){process.nextTick((function(){n(e)}))}if(!t)return o(new Error("No payment given"));const i=r[e];if(!i)return o(new Error(`Platform ${e} not recognized`));i.verifyPayment(t,(function(t,r){if(t)return n(t);r.platform=e,n(null,r)}))},t.cancelSubscription=function(e,t,n){function o(e){process.nextTick((function(){n(e)}))}if(!t)return o(new Error("No payment given"));const i=r[e];return i?i.cancelSubscription?void i.cancelSubscription(t,(function(e,t){if(e)return n(e);n(null,t)})):o(new Error(`Platform ${e} does not have cancelSubscription method`)):o(new Error(`Platform ${e} not recognized`))}},function(e,t){e.exports=require("http")},function(e,t,n){"use strict";const r=n(4),o=n(3),i="https://appstore-sdk.amazon.com/version/1.0/verifyReceiptId/developer/";t.verifyPayment=function(e,t){try{r.equal(typeof e.secret,"string","Shared secret must be a string"),r.equal(typeof e.userId,"string","User ID must be a string"),r.equal(typeof e.receipt,"string","Receipt must be a string")}catch(e){return process.nextTick((function(){t(e)}))}const n=`${i+e.secret}/user/${e.userId}/receiptId/${e.receipt}`;o.get(n,null,(function(e,n,r){if(e)return t(e);let o=null;try{o=function(e){const t=JSON.parse(e),n=t.purchaseDate?parseInt(t.purchaseDate,10):null;let r=null;return t.cancelDate?r=parseInt(t.cancelDate,10):t.renewalDate&&(r=parseInt(t.renewalDate,10)),{receipt:t,transactionId:t.receiptId,productId:t.productId,purchaseDate:n,expirationDate:r}}(r)}catch(e){return t(e)}return 400===n.statusCode?t(new Error("receiptId is invalid, or no transaction was found for this receiptId")):496===n.statusCode?t(new Error("Invalid sharedSecret")):497===n.statusCode?t(new Error("Invalid User ID")):500===n.statusCode?t(new Error("There was an Internal Servor Error")):200!==n.statusCode?t(new Error("Unknown operation exception")):void t(null,o)}))}},function(e,t,n){"use strict";const r=n(15),o=n(16);e.exports=function(e,t,n,i){t=t||{};const a=r.parse(e);a.hostname&&(t.hostname=a.hostname),a.port&&(t.port=a.port),a.path&&(t.path=a.path);const s=o.request(t,(function(e){e.setEncoding("utf8");let t="";e.on("data",(function(e){t+=e})),e.on("end",(function(){i(null,e,t)}))}));s.on("error",i),s.end(n)}},function(e,t){e.exports=require("url")},function(e,t){e.exports=require("https")},function(e,t,n){"use strict";const r=n(3),o=n(18);e.exports=function(e,t,n){t=t||{};let i=null;try{t.form?(i=o.stringify(t.form),t.headers={"content-type":"application/x-www-form-urlencoded","content-length":Buffer.byteLength(i)}):t.json&&(i=JSON.stringify(t.json),t.headers={"content-type":"application/json","content-length":Buffer.byteLength(i)})}catch(e){return process.nextTick((function(){n(e)}))}t.method="POST",r.request(e,t,i,n)}},function(e,t){e.exports=require("querystring")},function(e,t,n){"use strict";const r=n(3);e.exports=function(e,t,n){(t=t||{}).method="GET",r.request(e,t,null,n)}},function(e,t,n){"use strict";const r=n(4),o=n(3),i="https://sandbox.itunes.apple.com/verifyReceipt",a="https://buy.itunes.apple.com/verifyReceipt",s={21e3:"The App Store could not read the JSON object you provided.",21002:"The data in the receipt-data property was malformed or missing.",21003:"The receipt could not be authenticated.",21004:"The shared secret you provided does not match the shared secret on file for your account.",21005:"The receipt server is not currently available.",21006:"This receipt is valid but the subscription has expired. When this status code is returned to your server, the receipt data is also decoded and returned as part of the response.",21007:"This receipt is from the test environment, but it was sent to the production service for verification. Send it to the test environment service instead.",21008:"This receipt is from the production receipt, but it was sent to the test environment service for verification. Send it to the production environment service instead.",21009:"Internal data access error. Try again later.",21010:"The user account cannot be found or has been deleted."};function u(e,t){if(e.hasOwnProperty(t))return e[t];if(e.hasOwnProperty("in_app")&&e.in_app[0]){const n=e.in_app.reduce((e,t)=>e.purchase_date_ms>t.purchase_date_ms?e:t);return n.hasOwnProperty(t)?n[t]:null}return null}function c(e){return e?parseInt(e,10):null}function p(e,t,n){o.post(e,t,(function(e,t,r){if(e)return n(e);if(200!==t.statusCode)return n({statusCode:t.statusCode,error:r});let o;try{o=function(e){e=JSON.parse(e);const t=parseInt(e.status,10);let n=null;if(0!==t&&21006!==t){const e=new Error(s[t]||"Unknown status code: "+t);throw e.status=t,e}let r=u(e.receipt,"product_id"),o=u(e.receipt,"transaction_id"),i=c(u(e.receipt,"purchase_date_ms")),a=c(u(e.receipt,"expires_date_ms")||u(e.receipt,"expires_date"));const p=u(e,"latest_expired_receipt_info"),l=u(e,"pending_renewal_info");if(e.hasOwnProperty("latest_receipt_info"))if(Array.isArray(e.latest_receipt_info)&&e.latest_receipt_info.length>0){n=e.latest_receipt_info.sort((function(e,t){return parseInt(e.transaction_id,10)-parseInt(t.transaction_id,10)}));const t=n[n.length-1];r=t.product_id,o=t.transaction_id,i=c(t.purchase_date_ms),a=c(t.expires_date_ms||t.expires_date)}else e.latest_receipt_info&&e.latest_receipt_info.transaction_id&&(n=[e.latest_receipt_info],r=e.latest_receipt_info.product_id,o=e.latest_receipt_info.transaction_id,i=c(e.latest_receipt_info.purchase_date_ms),a=c(e.latest_receipt_info.expires_date_ms||e.latest_receipt_info.expires_date));return p&&p.cancellation_date_ms&&(a=c(p.cancellation_date_ms)),{receipt:e.receipt,latestReceiptInfo:n,latestExpiredReceiptInfo:p,productId:r,transactionId:o,purchaseDate:i,expirationDate:a,pendingRenewalInfo:l}}(r)}catch(e){return n(e)}n(null,o)}))}t.verifyPayment=function(e,t){const n={};try{r.equal(typeof e.receipt,"string","Receipt must be a string"),o=e.receipt,Boolean(o.match(/^[a-zA-Z0-9/+]+={0,2}$/))?n["receipt-data"]=e.receipt:n["receipt-data"]=Buffer.from(e.receipt,"utf8").toString("base64")}catch(e){return process.nextTick((function(){t(e)}))}var o;function s(n,r,o){if(n)return t(n);const i=r.receipt,a=u(i,"product_id");if(e.hasOwnProperty("productId")&&e.productId!==a)return t(new Error(`Wrong product ID: ${e.productId} (expected: ${a})`));let s=u(i,"bid");return null===s&&(s=u(i,"bundle_id")),e.hasOwnProperty("packageName")&&e.packageName!==s?t(new Error(`Wrong bundle ID: ${e.packageName} (expected: ${s})`)):(r.environment=o,t(null,r))}void 0!==e.secret&&(r.equal(typeof e.secret,"string","payment.secret must be a string"),n.password=e.secret),void 0!==e.excludeOldTransactions&&(r.equal(typeof e.excludeOldTransactions,"boolean","payment.excludeOldTransactions must be a boolean"),n["exclude-old-transactions"]=e.excludeOldTransactions),p(a,{json:n},(function(e,t){return e&&21007===e.status?p(i,{json:n},(function(e,t){s(e,t,"sandbox")})):s(e,t,"production")}))}},function(e,t,n){"use strict";const r=n(4),o=n(22),i=n(7),a=n(3);function s(e){let t;return r.equal(typeof e.packageName,"string","Package name must be a string"),r.equal(typeof e.productId,"string","Product ID must be a string"),r.equal(typeof e.receipt,"string","Receipt must be a string"),t="string"==typeof e.keyObject||Buffer.isBuffer(e.keyObject)?JSON.parse(e.keyObject):e.keyObject,r(t,"Google API key object must be provided"),r.equal(typeof t,"object","Google API key object must be an object"),r.equal(typeof t.client_email,"string","Google API client_email must be a string"),r.equal(typeof t.private_key,"string","Google API private_key must be a string"),t}t.verifyPayment=function(e,t){let n;try{n=s(e)}catch(e){return process.nextTick((function(){t(e)}))}o.getToken(n.client_email,n.private_key,i.publisherScope,(function(n,r){if(n)return t(n);let o;o=e.subscription?i.purchasesSubscriptionsGet(e.packageName,e.productId,e.receipt,r):i.purchasesProductsGet(e.packageName,e.productId,e.receipt,r),a.get(o,null,(function(n,r,o){if(n)return t(n);if(200!==r.statusCode)return t({statusCode:r.statusCode,error:o});let i;try{i=function(e,t){const n=JSON.parse(e),r=n.startTimeMillis||n.purchaseTimeMillis,o=r?parseInt(r,10):null,i=n.expiryTimeMillis?parseInt(n.expiryTimeMillis,10):null;return{receipt:n,transactionId:n.orderId,productId:t.productId,purchaseDate:o,expirationDate:i}}(o,e)}catch(e){return t(e)}return t(null,i)}))}))},t.cancelSubscription=function(e,t){let n;try{n=s(e)}catch(e){return process.nextTick((function(){t(e)}))}o.getToken(n.client_email,n.private_key,i.publisherScope,(function(n,r){if(n)return t(n);const o=i.purchasesSubscriptionsCancel(e.packageName,e.productId,e.receipt,r);a.post(o,null,(function(e,n,r){return e?t(e):204!==n.statusCode?t({statusCode:n.statusCode,error:r}):t(null,null)}))}))}},function(e,t,n){"use strict";const r=n(23),o=n(7),i=n(3),a={};t.getToken=function(e,t,n,s){if(a.hasOwnProperty(e)&&a[e].expiry>Date.now())return setImmediate(s,null,a[e].token);const u={grant_type:"urn:ietf:params:oauth:grant-type:jwt-bearer",assertion:r.encode({iss:e,scope:n,aud:o.tokenRequest,exp:Math.floor(Date.now()/1e3)+3600,iat:Math.floor(Date.now()/1e3)},t,"RS256")};i.post(o.tokenRequest,{form:u},(function(t,n,r){if(t)return s(t);if(200!==n.statusCode)return s(new Error(`Received ${n.statusCode} status code with body: ${r}`));let o;try{o=JSON.parse(r)}catch(t){return s(t)}return a[e]={token:o.access_token,expiry:1e3*(o.expires_in-60)+Date.now()},s(null,a[e].token)}))}},function(e,t){e.exports=require("jwt-simple")},function(e,t){e.exports=require("util")},function(e,t,n){"use strict";const r=n(4),o=n(3),i="https://apipub.roku.com/listen/transaction-service.svc/validate-transaction";t.verifyPayment=function(e,t){try{r.equal(typeof e.devToken,"string","Developer ID must be a string"),r.equal(typeof e.receipt,"string","Receipt must be a string"),r.equal(e.receipt.match(/\w/g).length,32,"Receipt must contain 32 digits"),r.equal(e.receipt.match(/-/g).length,4,"Receipt must contain 4 dashes")}catch(e){return process.nextTick((function(){t(e)}))}const n=`${i}/${e.devToken}/${e.receipt}`;o.get(n,{headers:{Accept:"application/json"}},(function(e,n,r){if(e)return t(e);if(200!==n.statusCode)return t(new Error(`Received ${n.statusCode} status code with body: ${r}`));let o=null;try{o=function(e){const t=JSON.parse(e);return t.originalPurchaseDate=new Date(parseInt(t.originalPurchaseDate.substr(6),10)).getTime(),t.purchaseDate=new Date(parseInt(t.purchaseDate.substr(6),10)).getTime(),t.expirationDate=t.expirationDate?new Date(parseInt(t.expirationDate.substr(6),10)).getTime():null,{receipt:t,transactionId:t.transactionId,productId:t.productId,purchaseDate:t.purchaseDate,expirationDate:t.expirationDate}}(r)}catch(e){return t(e)}if(o.receipt.errorMessage)return t(new Error(o.receipt.errorMessage));t(null,o)}))}},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),i=n(1),a=n.n(i),s=n(8),u=n.n(s);var c={"0000":"Success","0011":"User already exists","0404":"Item not found","invalid-platform":"The platform from which you are trying to make payment is not in service","iap-verification-failed":"Your purchase failed","invalid-creds":"Invalid Email Address or Password","no-auth":"Please provide authorization token","invalid-jwt":"JWT token is not valid","user-not-found":"User Not Found",forbidden:"Access Forbidden"},p=function(){function e(e){this.data=void 0,this.error=void 0,this.resultCode=e.resultCode,this.message=e.message,this.data=e.data,this.error=e.error}return e.get=function(t,n,r,o){return void 0===n&&(n=""),void 0===r&&(r=void 0),void 0===o&&(o=void 0),0==n.length?new e({resultCode:t,message:c[t],data:r,error:o}):new e({resultCode:t,message:n,data:r,error:o})},e.prototype.SetData=function(e){return this.data=e,this},e.prototype.SetMessage=function(e){return this.message=e,this},e.prototype.SetResultCode=function(e){return this.resultCode=e,this},e.prototype.SetError=function(e){return this.error=e,this},e.prototype.parseAs=function(){return this.data?this.data:void 0},e}(),l=function(){function e(e,t,n){void 0===t&&(t=400),this.responseCode=400,this.message=n,this.resultCode=e,this.responseCode=t,this.name="ApiError"}return e.prototype.toResponseData=function(){return p.get(this.resultCode,c[this.resultCode],void 0,this.message)},e}(),d=[o.a.json({limit:"50mb"}),o.a.urlencoded({extended:!0})];function f(e){return function(t,n,r){for(var o=0,i=e;o<i.length;o++){var a=i[o];delete t.body[a]}r()}}var h=n(5),y=n.n(h),b=n(2),v=function(){function e(){}return e.sign=function(e,t){return t.algorithm="RS256",y.a.sign(e,b.b,t)},e.decode=function(e,t){return y.a.decode(e,t)},e.verify=function(e,t){return t.algorithms=["RS256"],y.a.verify(e,b.c,t)},e}(),g=n(6),m=n.n(g),w=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},S=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},x=new i.Schema({firstName:{type:String},lastName:{type:String},phoneNumber:{type:String,unique:!0,sparse:!0},gender:{type:String,enum:["Male","Female","Other",""]},email:{type:String,required:[!0,"email is required"],unique:!0,sparse:!0},passwordHash:{type:String,required:[!0,"Password is required"]},passwordSalt:{type:String},address:{type:{line1:{type:String,required:[!0,"Address Line1 is required"]},line2:{type:String},postalCode:{type:String,required:[!0,"Postal is required"]},city:{type:String,required:[!0,"City is required"]},state:{type:String,required:[!0,"State is required"]},country:{type:String,required:[!0,"Country is required"]},point:{type:{title:{type:String,required:!0},coordinates:{type:[Number],required:!0}}}}},photoUrl:{type:String},inAppPurchases:[{type:i.Schema.Types.Mixed}]},{toJSON:{transform:function(e,t,n){return delete t.passwordHash,delete t.passwordSalt,delete t.inAppPurchases,t}}});x.pre("save",(function(e){var t=this;if(!t.isModified("passwordHash"))return e();m.a.genSalt(10,(function(n,r){if(n)return console.log(n),e(n);m.a.hash(t.passwordHash,r,(function(n,o){if(n)return e(n);t.passwordHash=o,t.passwordSalt=r,e()}))}))})),x.method("jwt",(function(){return v.sign({_couchdb:{roles:["user"]}},{subject:String(this._id),keyid:"accelerate",expiresIn:"7d",issuer:"accelerate.fitness"})})),x.static("authenticate",(function(e,t){return w(this,void 0,void 0,(function(){var n;return S(this,(function(r){switch(r.label){case 0:return[4,k.findOne({email:e}).exec()];case 1:if(n=r.sent()){if(m.a.compareSync(t,n.passwordHash))return[2,n.jwt()];throw new l("",401,c["invalid-creds"])}throw new l("user-not-found",404,c["user-not-found"])}}))}))}));var k=Object(i.model)("user",x),I=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},R=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};function A(e){var t=this;return function(n,r,o){I(t,void 0,void 0,(function(){return R(this,(function(t){switch(t.label){case 0:return[4,e(n,r,o)];case 1:return t.sent(),[2]}}))})).catch(o)}}var C=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},q=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};function D(){var e=this;return A((function(t,n,r){return C(e,void 0,void 0,(function(){var e,n,o,i;return q(this,(function(a){switch(a.label){case 0:return(e=null===(i=t.headers.authorization)||void 0===i?void 0:i.replace("Bearer ","").trim())?(n=v.verify(e,{}),[4,k.findById(n.sub).exec()]):[3,2];case 1:if(!(o=a.sent()))throw new l("user-not-found",404,c["user-not-found"]);return t.user=o,r(),[3,3];case 2:throw new l("invalid-jwt",401,c["invalid-jwt"]);case 3:return[2]}}))}))}))}var j=new i.Schema({name:{type:String,required:[!0,"Name is required"]},phoneNumber:{type:String,required:[!0,"Phone number is required"],unique:!0},gender:{type:String,enum:["Male","Female","Other"]},email:{type:String,required:[!0,"email is required"],unique:!0},passwordHash:{type:String,required:[!0,"Password is required"]},passwordSalt:{type:String,required:!0},address:{type:{line1:{type:String,required:[!0,"Address Line1 is required"]},line2:{type:String,required:!1},postalCode:{type:String,required:[!0,"Postal Code is required"]},point:{type:{type:String,required:!0},coordinates:{type:[Number],required:!0}}},required:[!0,"Address is required."]},photoUrl:{type:String,required:[!0,"Profile picture is required for identification"]},verified:{type:Boolean,required:!0},documents:[{title:{type:String,required:!0},proof:{type:String,required:!0}}]},{toJSON:{transform:function(e,t,n){return delete t.passwordHash,delete t.passwordSalt,t}}}),E=Object(i.model)("fitnessPartner",j),P=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},O=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},_=Object(r.Router)();_.post("/",f(["_id"]),A((function(e,t){return P(void 0,void 0,void 0,(function(){var n;return O(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,E.create(e.body)];case 1:return r.sent(),[3,3];case 2:throw"MongoError"===(n=r.sent()).name&&11e3===n.code?new l("0011",400,"User already exists"):n;case 3:return t.send(p.get("0000")),[2]}}))}))})));var T=n(9),U=n.n(T),B=n(10),N=n.n(B);var K=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},G=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},M=Object(r.Router)();M.put("/",f(["_id"]),A((function(e,t){return K(void 0,void 0,void 0,(function(){var n,r;return G(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,k.create(e.body)];case 1:return n=o.sent(),t.send(p.get("0000").SetData({jwt:n.jwt()})),[3,3];case 2:throw r=o.sent(),console.log(r),"MongoError"===r.name&&11e3===r.code?new l("0011",400,"User already exists"):r;case 3:return[2]}}))}))}))),M.use(D()),M.get("/",A((function(e,t){return K(void 0,void 0,void 0,(function(){return G(this,(function(n){return t.send(p.get("0000").SetData(e.user.toJSON())),[2]}))}))}))),M.post("/",f(["_id","passwordHash","passwordSalt"]),A((function(e,t){return K(void 0,void 0,void 0,(function(){var n,r,o,i,a,s;return G(this,(function(u){switch(u.label){case 0:if(n=e.body,r=e.user,!n.photoUrl)return[3,4];if(U.a.isURL(n.photoUrl))return[3,4];o=String(n.photoUrl),i=o.match(/[^:/]\w+(?=;|,)/),a=i?i[0]:"",s="profile-images/"+r._id+(a?"."+a:""),u.label=1;case 1:return u.trys.push([1,3,,4]),[4,new N.a.S3({apiVersion:"2006-03-01",credentials:{accessKeyId:b.d,secretAccessKey:b.e}}).putObject({Bucket:"accelerate-images",Key:s,Body:Buffer.from(o,"base64"),GrantReadACP:"public"}).send((function(e){console.log(e)}))];case 2:return u.sent(),n.photoUrl="https://accelerate-images.s3.amazonaws.com/"+s,[3,4];case 3:throw u.sent(),new l("image-upload-failed",500,"Failed to upload image please try again later.");case 4:return Object.assign(r,n),[4,r.save()];case 5:return u.sent(),t.send(p.get("0000").SetData(r.toJSON())),[2]}}))}))})));var W=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},Y=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},H=Object(r.Router)();H.use("/user",M),H.use("/partners",_),H.post("/",A((function(e,t){return W(void 0,void 0,void 0,(function(){var n,r,o,i;return Y(this,(function(a){switch(a.label){case 0:return n=e.body,r=n.email,o=n.password,[4,k.authenticate(r,o)];case 1:return i=a.sent(),t.send(p.get("0000").SetData({jwt:i})),[2]}}))}))}))),H.post("/forgot-password",A((function(e,t){return W(void 0,void 0,void 0,(function(){return Y(this,(function(e){return[2]}))}))}))),H.use(D()),H.get("/refresh-token",A((function(e,t){return W(void 0,void 0,void 0,(function(){return Y(this,(function(n){return t.send(p.get("0000").SetData({jwt:e.user.jwt()})),[2]}))}))})));var z=n(11),J=n.n(z),Q=6778001,L=6778002,Z=6778003,F=6778005;var V={21e3:Q,21002:Q,21003:Q,21004:F,21005:L,21006:Z,21007:Q,21008:Q,21009:F,21010:F};function X(e,t,n){if("google"===e)return function(e,t){if(e)throw e.statusCode?{code:Q}:{code:F};if(t.expirationDate&&t.expirationDate<Date.now())throw{code:Z};return!0}(t,n);if("apple"===e)return function(e,t){if(e)throw e.statusCode?{code:L}:{code:V[e.status]};if(t.expirationDate&&t.expirationDate<Date.now())throw{code:Z};return!0}(t,n);throw{code:Q}}var $=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},ee=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},te=Object(r.Router)();te.use(D),te.post("/",A((function(e,t){return $(void 0,void 0,void 0,(function(){var n,r,o,i,a,s;return ee(this,(function(u){return(r=(n={"android-playstore":"google","ios-appstore":"apple"})[null===(i=e.body.transaction)||void 0===i?void 0:i.type])?(o={receipt:e.body.transaction.receipt,productId:e.body.id,packageName:"fitness.accelerate",subscription:"free subscription"==(null===(a=e.body.transaction)||void 0===a?void 0:a.type)||"paid subscription"==(null===(s=e.body.transaction)||void 0===s?void 0:s.type),keyObject:"google"==r?b.a:void 0,secret:"apple"==r?"<IOS-SECRET-HERE>":void 0},J.a.verifyPayment(n[e.body.transaction.type],o,(function(n,o){return $(void 0,void 0,void 0,(function(){var i;return ee(this,(function(a){switch(a.label){case 0:return a.trys.push([0,4,,5]),X(r,n,o)?e.user.inAppPurchases.find((function(e){return e.transactionId==o.transactionId}))?[3,2]:(e.user.inAppPurchases.push(e.body.receipt),[4,k.updateOne(e.user)]):[3,3];case 1:a.sent(),a.label=2;case 2:t.send({ok:!0,data:{transaction:e.body.transaction}}),a.label=3;case 3:return[3,5];case 4:return(i=a.sent()).code?t.send({ok:!1,data:i}):t.send({ok:!1,data:F}),[3,5];case 5:return[2]}}))}))})),[2]):(t.send({ok:!1,code:Q}),[2])}))}))})));var ne=Object(r.Router)();ne.use("/auth",H),ne.use("/in-app-purchases",te);var re=n(12),oe=n.n(re),ie=o()();a.a.connect("mongodb+srv://admin:U6PXNTcCMvuWJQUH@cluster0.jkbm8.mongodb.net/accelerate?retryWrites=true&w=majority",{useNewUrlParser:!0,useUnifiedTopology:!0,useCreateIndex:!0}),ie.use(u()()),ie.use(d),ie.use(ne),ie.use((function(e,t,n,r){e.constructor===l&&"ApiError"===e.name?n.status(e.responseCode).send(e.toResponseData()):(n.status(500).send(p.get("unknown","",void 0,e.message)),console.log(e))})),oe.a.createServer(ie).listen(process.env.PORT||8080,(function(){console.log("Server Running...")}))}]);